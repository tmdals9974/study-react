# useEffect 실전 활용법1

- 첫번째 매개변수로 함수 전달(`부수효과 함수`), 두번째 매개변수(`의존성 배열`)에 상태값이 담긴 배열 전달 시, **의존성 배열 내의 상태값이 변경되면 부수효과 함수가 실행**된다.
- 의존성 배열에 undefined 전달 시, **렌더링될 때 마다 호출**된다.
- 의존성 배열에 빈 배열을 넘길 경우, **컴포넌트 mount/unmount 시 호출**된다.
  - `useOnMounted.js`와 같이 커스텀훅을 이용하여 조금 더 명시적으로 이용하는 것을 추천.
- 의존성 배열에는 부수 효과 함수에 사용된 **컴포넌트 상태값, 컴포넌트 속성값, 컴포넌트 지역변수, 컴포넌트 지역함수**가 **`무조건`** 들어가야함. (상태값 변경 함수 제외) (외부변수, 외부함수 제외)
  - 자주 까먹는 경우가 있기 때문에 eslint rule로도 제공하고 있으며, cra로 생성 시 자동 추가됨.
- useEffect는 **렌더링 된 이후에만 실행**되며, **비동기로 부수효과 함수 호출**
- 부수효과 함수의 반환값은 **함수만 반환**할 수 있고, **반환된 함수는 부수효과 함수가 호출되기 직전과 컴포넌트가 사라지기 직전에 호출**됨. (`7.js`. useCallback 사용 이유 : 렌더링 될때마다 `fetchAndSetUser`함수가 재생성되어 useEffect가 계속 실행됨.)
